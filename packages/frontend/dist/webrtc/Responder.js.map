{"version":3,"file":"Responder.js","sources":["../../src/webrtc/Responder.ts"],"sourcesContent":["import { Peer } from './Peer'\n\nexport class Responder extends Peer {\n\tprotected role = 'responder' as const\n\n\tprotected connect(): Promise<void> {\n\t\t// The connection is initiated from the Peer class\n\t\t// The responder waits for an offer\n\t\treturn Promise.resolve()\n\t}\n\n\tprotected async handleOffer(offer: RTCSessionDescriptionInit) {\n\t\tif (!this.connection) {\n\t\t\tthis.initializeConnectionAndChannel()\n\t\t}\n\t\tif (!this.connection) {\n\t\t\tthrow new Error('Connection is not initialized')\n\t\t}\n\t\tawait this.connection.setRemoteDescription(offer)\n\t\tconst answer = await this.connection.createAnswer()\n\t\tawait this.setAndShareLocalDescription(answer)\n\t}\n\n\tprotected handleAnswer(answer: RTCSessionDescriptionInit): void {\n\t\t// Responder does not handle answers\n\t}\n}\n"],"names":["Responder","_Peer","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_defineProperty","_inherits","_createClass","key","value","connect","Promise","resolve","_handleOffer","_asyncToGenerator","_regeneratorRuntime","mark","_callee","offer","answer","wrap","_callee$","_context","prev","next","connection","initializeConnectionAndChannel","Error","setRemoteDescription","createAnswer","sent","setAndShareLocalDescription","stop","handleOffer","_x","apply","handleAnswer","Peer"],"mappings":";;;AAEaA,IAAAA,SAAS,0BAAAC,KAAA,EAAA;AAAA,EAAA,SAAAD,SAAA,GAAA;AAAA,IAAA,IAAAE,KAAA;AAAAC,IAAAA,eAAA,OAAAH,SAAA,CAAA;AAAA,IAAA,KAAA,IAAAI,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,GAAAC,IAAAA,KAAA,CAAAJ,IAAA,GAAAK,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA,EAAA;AAAAF,MAAAA,IAAA,CAAAE,IAAA,CAAAJ,GAAAA,SAAA,CAAAI,IAAA,CAAA;AAAA;AAAAP,IAAAA,KAAA,GAAAQ,UAAA,CAAA,IAAA,EAAAV,SAAA,EAAAW,EAAAA,CAAAA,MAAA,CAAAJ,IAAA,CAAA,CAAA;IAAAK,eAAA,CAAAV,KAAA,EAAA,MAAA,EACJ,WAAW,CAAA;AAAA,IAAA,OAAAA,KAAA;AAAA;EAAAW,SAAA,CAAAb,SAAA,EAAAC,KAAA,CAAA;EAAA,OAAAa,YAAA,CAAAd,SAAA,EAAA,CAAA;IAAAe,GAAA,EAAA,SAAA;AAAAC,IAAAA,KAAA,EAE5B,SAAUC,OAAOA,GAAkB;AAClC;AACA;AACA,MAAA,OAAOC,OAAO,CAACC,OAAO,EAAE;AACzB;AAAC,GAAA,EAAA;IAAAJ,GAAA,EAAA,aAAA;IAAAC,KAAA,EAAA,YAAA;MAAA,IAAAI,YAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAC,OAAAA,CAA4BC,KAAgC,EAAA;AAAA,QAAA,IAAAC,MAAA;AAAA,QAAA,OAAAJ,mBAAA,EAAA,CAAAK,IAAA,CAAA,SAAAC,SAAAC,QAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,YAAA,KAAA,CAAA;AAC3D,cAAA,IAAI,CAAC,IAAI,CAACC,UAAU,EAAE;gBACrB,IAAI,CAACC,8BAA8B,EAAE;AACtC;cAAC,IACI,IAAI,CAACD,UAAU,EAAA;AAAAH,gBAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA;AAAA,gBAAA;AAAA;AAAA,cAAA,MACb,IAAIG,KAAK,CAAC,+BAA+B,CAAC;AAAA,YAAA,KAAA,CAAA;AAAAL,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA;AAAA,cAAA,OAE3C,IAAI,CAACC,UAAU,CAACG,oBAAoB,CAACV,KAAK,CAAC;AAAA,YAAA,KAAA,CAAA;AAAAI,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA;AAAA,cAAA,OAC5B,IAAI,CAACC,UAAU,CAACI,YAAY,EAAE;AAAA,YAAA,KAAA,CAAA;cAA7CV,MAAM,GAAAG,QAAA,CAAAQ,IAAA;AAAAR,cAAAA,QAAA,CAAAE,IAAA,GAAA,EAAA;AAAA,cAAA,OACN,IAAI,CAACO,2BAA2B,CAACZ,MAAM,CAAC;AAAA,YAAA,KAAA,EAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAAG,QAAA,CAAAU,IAAA,EAAA;AAAA;AAAA,SAAA,EAAAf,OAAA,EAAA,IAAA,CAAA;OAC9C,CAAA,CAAA;MAAA,SAVegB,WAAWA,CAAAC,EAAA,EAAA;AAAA,QAAA,OAAArB,YAAA,CAAAsB,KAAA,CAAA,IAAA,EAAArC,SAAA,CAAA;AAAA;AAAA,MAAA,OAAXmC,WAAW;AAAA,KAAA;AAAA,GAAA,EAAA;IAAAzB,GAAA,EAAA,cAAA;AAAAC,IAAAA,KAAA,EAY3B,SAAU2B,YAAYA,CAACjB,MAAiC,EAAQ;AAC/D;AAAA;AACA,GAAA,CAAA,CAAA;AAAA,CAAA,CAvB6BkB,IAAI;;;;"}