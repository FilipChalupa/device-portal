{"version":3,"file":"Initiator.js","sources":["../../src/webrtc/Initiator.ts"],"sourcesContent":["import { Peer } from './Peer'\n\nexport class Initiator extends Peer {\n\tprotected role = 'initiator' as const\n\n\tprotected async connect(): Promise<void> {\n\t\tif (!this.connection) {\n\t\t\tthis.initializeConnectionAndChannel()\n\t\t}\n\t\tif (!this.connection) {\n\t\t\tthrow new Error('Connection is not initialized')\n\t\t}\n\t\tconst offer = await this.connection.createOffer()\n\t\tawait this.setAndShareLocalDescription(offer)\n\t}\n\n\tprotected handleOffer(offer: RTCSessionDescriptionInit): void {\n\t\t// Initiator does not handle offers\n\t}\n\n\tprotected async handleAnswer(answer: RTCSessionDescriptionInit) {\n\t\tif (this.connection) {\n\t\t\tawait this.connection.setRemoteDescription(answer)\n\t\t}\n\t}\n}\n"],"names":["Initiator","_Peer","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","_defineProperty","_inherits","_createClass","key","value","_connect","_asyncToGenerator","_regeneratorRuntime","mark","_callee","offer","wrap","_callee$","_context","prev","next","connection","initializeConnectionAndChannel","Error","createOffer","sent","setAndShareLocalDescription","stop","connect","apply","handleOffer","_handleAnswer","_callee2","answer","_callee2$","_context2","setRemoteDescription","handleAnswer","_x","Peer"],"mappings":";;;AAEaA,IAAAA,SAAS,0BAAAC,KAAA,EAAA;AAAA,EAAA,SAAAD,SAAA,GAAA;AAAA,IAAA,IAAAE,KAAA;AAAAC,IAAAA,eAAA,OAAAH,SAAA,CAAA;AAAA,IAAA,KAAA,IAAAI,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,GAAAC,IAAAA,KAAA,CAAAJ,IAAA,GAAAK,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA,EAAA;AAAAF,MAAAA,IAAA,CAAAE,IAAA,CAAAJ,GAAAA,SAAA,CAAAI,IAAA,CAAA;AAAA;AAAAP,IAAAA,KAAA,GAAAQ,UAAA,CAAA,IAAA,EAAAV,SAAA,EAAAW,EAAAA,CAAAA,MAAA,CAAAJ,IAAA,CAAA,CAAA;IAAAK,eAAA,CAAAV,KAAA,EAAA,MAAA,EACJ,WAAW,CAAA;AAAA,IAAA,OAAAA,KAAA;AAAA;EAAAW,SAAA,CAAAb,SAAA,EAAAC,KAAA,CAAA;EAAA,OAAAa,YAAA,CAAAd,SAAA,EAAA,CAAA;IAAAe,GAAA,EAAA,SAAA;IAAAC,KAAA,EAAA,YAAA;MAAA,IAAAC,QAAA,GAAAC,iBAAA,cAAAC,mBAAA,EAAAC,CAAAA,IAAA,CAE5B,SAAAC,OAAA,GAAA;AAAA,QAAA,IAAAC,KAAA;AAAA,QAAA,OAAAH,mBAAA,EAAA,CAAAI,IAAA,CAAA,SAAAC,SAAAC,QAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,YAAA,KAAA,CAAA;AACC,cAAA,IAAI,CAAC,IAAI,CAACC,UAAU,EAAE;gBACrB,IAAI,CAACC,8BAA8B,EAAE;AACtC;cAAC,IACI,IAAI,CAACD,UAAU,EAAA;AAAAH,gBAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA;AAAA,gBAAA;AAAA;AAAA,cAAA,MACb,IAAIG,KAAK,CAAC,+BAA+B,CAAC;AAAA,YAAA,KAAA,CAAA;AAAAL,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA;AAAA,cAAA,OAE7B,IAAI,CAACC,UAAU,CAACG,WAAW,EAAE;AAAA,YAAA,KAAA,CAAA;cAA3CT,KAAK,GAAAG,QAAA,CAAAO,IAAA;AAAAP,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA;AAAA,cAAA,OACL,IAAI,CAACM,2BAA2B,CAACX,KAAK,CAAC;AAAA,YAAA,KAAA,CAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAAG,QAAA,CAAAS,IAAA,EAAA;AAAA;AAAA,SAAA,EAAAb,OAAA,EAAA,IAAA,CAAA;OAC7C,CAAA,CAAA;AAAA,MAAA,SATec,OAAOA,GAAA;AAAA,QAAA,OAAAlB,QAAA,CAAAmB,KAAA,CAAA,IAAA,EAAA/B,SAAA,CAAA;AAAA;AAAA,MAAA,OAAP8B,OAAO;AAAA,KAAA;AAAA,GAAA,EAAA;IAAApB,GAAA,EAAA,aAAA;AAAAC,IAAAA,KAAA,EAWvB,SAAUqB,WAAWA,CAACf,KAAgC,EAAQ;AAC7D;AAAA;AACA,GAAA,EAAA;IAAAP,GAAA,EAAA,cAAA;IAAAC,KAAA,EAAA,YAAA;MAAA,IAAAsB,aAAA,GAAApB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAmB,QAAAA,CAA6BC,MAAiC,EAAA;AAAA,QAAA,OAAArB,mBAAA,EAAA,CAAAI,IAAA,CAAA,SAAAkB,UAAAC,SAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA;AAAA,YAAA,KAAA,CAAA;cAAA,IACzD,CAAA,IAAI,CAACC,UAAU,EAAA;AAAAc,gBAAAA,SAAA,CAAAf,IAAA,GAAA,CAAA;AAAA,gBAAA;AAAA;AAAAe,cAAAA,SAAA,CAAAf,IAAA,GAAA,CAAA;AAAA,cAAA,OACZ,IAAI,CAACC,UAAU,CAACe,oBAAoB,CAACH,MAAM,CAAC;AAAA,YAAA,KAAA,CAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAAE,SAAA,CAAAR,IAAA,EAAA;AAAA;AAAA,SAAA,EAAAK,QAAA,EAAA,IAAA,CAAA;OAEnD,CAAA,CAAA;MAAA,SAJeK,YAAYA,CAAAC,EAAA,EAAA;AAAA,QAAA,OAAAP,aAAA,CAAAF,KAAA,CAAA,IAAA,EAAA/B,SAAA,CAAA;AAAA;AAAA,MAAA,OAAZuC,YAAY;AAAA,KAAA;AAAA,GAAA,CAAA,CAAA;AAAA,CAAA,CAlBEE,IAAI;;;;"}