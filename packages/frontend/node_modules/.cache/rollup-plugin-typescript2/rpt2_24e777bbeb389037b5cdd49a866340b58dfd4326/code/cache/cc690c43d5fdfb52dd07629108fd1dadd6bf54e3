{"code":"import { useMemo, useState } from 'react';\nimport { Responder } from './webrtc/Responder';\nvar responders = {};\nexport var useDevicePortalOutput = function (room, options) {\n    var _a = useState(null), valueState = _a[0], setValueState = _a[1];\n    var output = useMemo(function () {\n        if (valueState === null || valueState.room !== room) {\n            return null;\n        }\n        return {\n            value: valueState.value,\n            sendValueToInput: valueState.sendValueToInput,\n        };\n    }, []);\n    if (!responders[room]) {\n        var _b = Promise.withResolvers(), firstValuePromise = _b.promise, firstValueResolve_1 = _b.resolve;\n        var responder_1 = new Responder(room, {\n            onValue: function (value) {\n                responders[room].output = { value: value, sendValueToInput: sendValueToInput_1 };\n                responders[room].setValueState({ room: room, value: value, sendValueToInput: sendValueToInput_1 });\n                firstValueResolve_1(value);\n            },\n            sendLastValueOnConnectAndReconnect: false,\n            websocketSignalingServer: options === null || options === void 0 ? void 0 : options.websocketSignalingServer,\n        });\n        var sendValueToInput_1 = function (value) {\n            responder_1.send(value);\n        };\n        responders[room] = {\n            responder: responder_1,\n            firstValuePromise: firstValuePromise,\n            output: null,\n            setValueState: setValueState,\n        };\n    }\n    responders[room].setValueState = setValueState;\n    if (output) {\n        return output;\n    }\n    if (responders[room].output) {\n        return responders[room].output;\n    }\n    throw responders[room].firstValuePromise;\n};\n//# sourceMappingURL=useDevicePortalOutput.js.map","references":["/home/onset/z/react-device-portal/node_modules/@types/react/index.d.ts","/home/onset/z/react-device-portal/packages/frontend/src/webrtc/Responder.ts"],"map":"{\"version\":3,\"file\":\"useDevicePortalOutput.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/useDevicePortalOutput.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAsC,MAAM,OAAO,CAAA;AAC7E,OAAO,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAA;AAU9C,IAAM,UAAU,GAOZ,EAAE,CAAA;AAEN,MAAM,CAAC,IAAM,qBAAqB,GAAG,UACpC,IAAY,EACZ,OAEC;IAEK,IAAA,KAA8B,QAAQ,CAAe,IAAI,CAAC,EAAzD,UAAU,QAAA,EAAE,aAAa,QAAgC,CAAA;IAChE,IAAM,MAAM,GAAG,OAAO,CAAC;QACtB,IAAI,UAAU,KAAK,IAAI,IAAI,UAAU,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC;YACrD,OAAO,IAAI,CAAA;QACZ,CAAC;QACD,OAAO;YACN,KAAK,EAAE,UAAU,CAAC,KAAK;YACvB,gBAAgB,EAAE,UAAU,CAAC,gBAAgB;SAC7C,CAAA;IACF,CAAC,EAAE,EAAE,CAAC,CAAA;IAEN,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC;QACjB,IAAA,KACL,OAAO,CAAC,aAAa,EAAU,EADf,iBAAiB,aAAA,EAAW,mBAAiB,aAC9B,CAAA;QAChC,IAAM,WAAS,GAAG,IAAI,SAAS,CAAC,IAAI,EAAE;YACrC,OAAO,EAAE,UAAC,KAAK;gBACd,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,EAAE,KAAK,OAAA,EAAE,gBAAgB,oBAAA,EAAE,CAAA;gBACrD,UAAU,CAAC,IAAI,CAAC,CAAC,aAAa,CAAC,EAAE,IAAI,MAAA,EAAE,KAAK,OAAA,EAAE,gBAAgB,oBAAA,EAAE,CAAC,CAAA;gBACjE,mBAAiB,CAAC,KAAK,CAAC,CAAA;YACzB,CAAC;YACD,kCAAkC,EAAE,KAAK;YACzC,wBAAwB,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,wBAAwB;SAC3D,CAAC,CAAA;QACF,IAAM,kBAAgB,GAAG,UAAC,KAAa;YACtC,WAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QACtB,CAAC,CAAA;QACD,UAAU,CAAC,IAAI,CAAC,GAAG;YAClB,SAAS,aAAA;YACT,iBAAiB,mBAAA;YACjB,MAAM,EAAE,IAAI;YACZ,aAAa,eAAA;SACb,CAAA;IACF,CAAC;IACD,UAAU,CAAC,IAAI,CAAC,CAAC,aAAa,GAAG,aAAa,CAAA;IAE9C,IAAI,MAAM,EAAE,CAAC;QACZ,OAAO,MAAM,CAAA;IACd,CAAC;IACD,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;QAC7B,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,CAAA;IAC/B,CAAC;IACD,MAAM,UAAU,CAAC,IAAI,CAAC,CAAC,iBAAiB,CAAA;AACzC,CAAC,CAAA\"}","dts":{"name":"/home/onset/z/react-device-portal/packages/frontend/node_modules/.cache/rollup-plugin-typescript2/placeholder/useDevicePortalOutput.d.ts","writeByteOrderMark":false,"text":"type State = {\n    room: string;\n    value: string;\n    sendValueToInput: (value: string) => void;\n};\nexport declare const useDevicePortalOutput: (room: string, options?: {\n    websocketSignalingServer?: string;\n}) => Pick<State, \"value\" | \"sendValueToInput\">;\nexport {};\n"}}
