{"code":"import { useEffect, useRef, useState } from 'react';\nimport { Initiator } from './webrtc/Initiator';\n// @TODO: warn if one room is used by multiple useDevicePortalInput hooks more than once at the same time\nexport var useDevicePortalInput = function (room, value, options) {\n    var _a = useState(null), initiator = _a[0], setInitiator = _a[1];\n    var onValueFromOutputRef = useRef(options === null || options === void 0 ? void 0 : options.onValueFromOutput);\n    onValueFromOutputRef.current = options === null || options === void 0 ? void 0 : options.onValueFromOutput;\n    useEffect(function () {\n        var initiator = new Initiator(encodeURIComponent(room), {\n            onValue: function (value) {\n                var _a;\n                (_a = onValueFromOutputRef.current) === null || _a === void 0 ? void 0 : _a.call(onValueFromOutputRef, value);\n            },\n            websocketSignalingServer: options === null || options === void 0 ? void 0 : options.websocketSignalingServer,\n        });\n        setInitiator(initiator);\n        return function () {\n            initiator.destroy();\n            setInitiator(null);\n        };\n    }, [room, options === null || options === void 0 ? void 0 : options.websocketSignalingServer]);\n    useEffect(function () {\n        initiator === null || initiator === void 0 ? void 0 : initiator.send(value);\n    }, [value, initiator]);\n};\n//# sourceMappingURL=useDevicePortalInput.js.map","references":["/home/onset/z/react-device-portal/node_modules/@types/react/index.d.ts","/home/onset/z/react-device-portal/packages/frontend/src/webrtc/Initiator.ts"],"map":"{\"version\":3,\"file\":\"useDevicePortalInput.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/useDevicePortalInput.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAA;AACnD,OAAO,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAA;AAE9C,yGAAyG;AAEzG,MAAM,CAAC,IAAM,oBAAoB,GAAG,UACnC,IAAY,EACZ,KAAa,EACb,OAGC;IAEK,IAAA,KAA4B,QAAQ,CAAmB,IAAI,CAAC,EAA3D,SAAS,QAAA,EAAE,YAAY,QAAoC,CAAA;IAClE,IAAM,oBAAoB,GAAG,MAAM,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,iBAAiB,CAAC,CAAA;IAC/D,oBAAoB,CAAC,OAAO,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,iBAAiB,CAAA;IAEzD,SAAS,CAAC;QACT,IAAM,SAAS,GAAG,IAAI,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE;YACzD,OAAO,EAAE,UAAC,KAAK;;gBACd,MAAA,oBAAoB,CAAC,OAAO,qEAAG,KAAK,CAAC,CAAA;YACtC,CAAC;YACD,wBAAwB,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,wBAAwB;SAC3D,CAAC,CAAA;QACF,YAAY,CAAC,SAAS,CAAC,CAAA;QAEvB,OAAO;YACN,SAAS,CAAC,OAAO,EAAE,CAAA;YACnB,YAAY,CAAC,IAAI,CAAC,CAAA;QACnB,CAAC,CAAA;IACF,CAAC,EAAE,CAAC,IAAI,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,wBAAwB,CAAC,CAAC,CAAA;IAE7C,SAAS,CAAC;QACT,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,IAAI,CAAC,KAAK,CAAC,CAAA;IACvB,CAAC,EAAE,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC,CAAA;AACvB,CAAC,CAAA\"}","dts":{"name":"/home/onset/z/react-device-portal/packages/frontend/node_modules/.cache/rollup-plugin-typescript2/placeholder/useDevicePortalInput.d.ts","writeByteOrderMark":false,"text":"export declare const useDevicePortalInput: (room: string, value: string, options?: {\n    onValueFromOutput?: (value: string) => void;\n    websocketSignalingServer?: string;\n}) => void;\n"}}
